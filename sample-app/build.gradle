plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

group = 'com.example'
version = '1.0.0'
sourceCompatibility = '11'
targetCompatibility = '11'

repositories {
    mavenCentral()
}

def vertxVersion = '4.5.8'

dependencies {
    implementation "io.vertx:vertx-core:${vertxVersion}"
    implementation "io.vertx:vertx-web:${vertxVersion}"
    implementation "io.vertx:vertx-micrometer-metrics:${vertxVersion}"
    implementation "io.vertx:vertx-reactive-streams:${vertxVersion}"
    implementation 'io.micrometer:micrometer-registry-prometheus-simpleclient:1.13.1'
}

jar {
    manifest {
        attributes 'Main-Class': 'com.example.MainVerticle'
    }
}

shadowJar {
    archiveClassifier.set('')
    archiveBaseName.set('vertx-app')
    archiveVersion.set('1.0.0-fat')
    mergeServiceFiles()
}
